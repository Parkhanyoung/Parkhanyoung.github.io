<!DOCTYPE html><html lang="ko" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="PyCon - Clean Code, Test, and Refactoring" /><meta property="og:locale" content="ko" /><meta name="description" content="클린코드, 테스트와 리팩토링 사전 개념 코드 악취(code smell): 코드를 읽는 이를 배려하지 않은 코드에서 나타나는 잠재적 문제들을 일컫는 말이다. 보이스카우트 규칙: 언제나 처음 왔을 때보다 깨끗하게 해놓고 캠프장을 떠날 것. 협업을 한다면 처음 받은 코드보다는 더 깨끗한 코드로 만들어야 한다. 클린 코드 핵심 가이드 가드클러즈(Guard Clause): 올바르지 않은 value를 체크하여 오류를 반환하는 구문을 위쪽에 배치한다. 이 방법을 통해 인덴트를 줄일 수 있다. NoneObject 활용: 객체가 없을 경우 None이 아닌 NoneObject를 반환하도록 하여 해당 객체가 존재하는지 여부를 따로 파악할 필요가 없도록 한다. [ex. 조건에 맞는 user가 없을 경우, user 객체와 같은 인터페이스를 갖는 user NoneObject를 반환함으로써, 별도로 user의 존재 여부를 파악하는 로직을 쓰지 않아도 되게끔 한다.] ‘not’ syntax sugar 이용 *syntax sugar를 사용하지 않고, 표준 문법을 사용하는 것을 syntax salt라고 한다. 클린 코드에서는 syntax sugar를 사용할 것을 권장한다. NoneObject 활용2: 유효성 오류가 발생하는 경우, 즉시 예외를 throw하기보다는 NoneObject를 반환함으로써, 검사를 마지막에 한 번만 진행할 수 있도록 한다. 삼항 연산자 이용 if else 키워드 사용 시 짧은 조건은 삼항 연산자를 사용한다. 단순한 형태의 if, switch문은 Dict Accessing 형식으로 바꿔준다. 작명 방법: 함수 이름은 snake_case로 지정하고, 행동을 이름의 가장 앞에 명명한다. 명사보다는 동사로써 명확하게 명시해주는 것이 좋다. 주석보단 클린 코드: 주석이 필요할 정도로 복잡한 로직은 별도의 함수로 분리하여, 함수명을 주석 대신 사용한다. 함수를 분리하는 것은 코드의 양을 줄여주고 가독성을 줄여줄 뿐만 아니라, 때로는 다른 클린 코드 패턴을 추가적으로 적용할 수 있게 해준다. 그 밖의 규칙 3줄 이상의 라인이 중복된 코드는 별도의 함수로 분리한다. 주석이 없는 코드가 제일 좋은 코드임을 명심하자. [주석 없이 이해될 수 있는 코드가 좋다는 말이지, 그냥 주석을 없애라는 게 아님] 클래스와 함수에 너무 많은 기능을 주면 안 된다. 많은 기능이 묶여있다면, 기능 별로 함수, 혹은 클래스를 분리하자. 함수의 인자는 4개를 넘으면 안 된다. 복잡한 로직은 캡슐화(별도의 함수로 분리)하고 직관적인 이름을 부여하자. .py 파일 하나에 두 개 이상의 클래스를 정의하지 말자." /><meta property="og:description" content="클린코드, 테스트와 리팩토링 사전 개념 코드 악취(code smell): 코드를 읽는 이를 배려하지 않은 코드에서 나타나는 잠재적 문제들을 일컫는 말이다. 보이스카우트 규칙: 언제나 처음 왔을 때보다 깨끗하게 해놓고 캠프장을 떠날 것. 협업을 한다면 처음 받은 코드보다는 더 깨끗한 코드로 만들어야 한다. 클린 코드 핵심 가이드 가드클러즈(Guard Clause): 올바르지 않은 value를 체크하여 오류를 반환하는 구문을 위쪽에 배치한다. 이 방법을 통해 인덴트를 줄일 수 있다. NoneObject 활용: 객체가 없을 경우 None이 아닌 NoneObject를 반환하도록 하여 해당 객체가 존재하는지 여부를 따로 파악할 필요가 없도록 한다. [ex. 조건에 맞는 user가 없을 경우, user 객체와 같은 인터페이스를 갖는 user NoneObject를 반환함으로써, 별도로 user의 존재 여부를 파악하는 로직을 쓰지 않아도 되게끔 한다.] ‘not’ syntax sugar 이용 *syntax sugar를 사용하지 않고, 표준 문법을 사용하는 것을 syntax salt라고 한다. 클린 코드에서는 syntax sugar를 사용할 것을 권장한다. NoneObject 활용2: 유효성 오류가 발생하는 경우, 즉시 예외를 throw하기보다는 NoneObject를 반환함으로써, 검사를 마지막에 한 번만 진행할 수 있도록 한다. 삼항 연산자 이용 if else 키워드 사용 시 짧은 조건은 삼항 연산자를 사용한다. 단순한 형태의 if, switch문은 Dict Accessing 형식으로 바꿔준다. 작명 방법: 함수 이름은 snake_case로 지정하고, 행동을 이름의 가장 앞에 명명한다. 명사보다는 동사로써 명확하게 명시해주는 것이 좋다. 주석보단 클린 코드: 주석이 필요할 정도로 복잡한 로직은 별도의 함수로 분리하여, 함수명을 주석 대신 사용한다. 함수를 분리하는 것은 코드의 양을 줄여주고 가독성을 줄여줄 뿐만 아니라, 때로는 다른 클린 코드 패턴을 추가적으로 적용할 수 있게 해준다. 그 밖의 규칙 3줄 이상의 라인이 중복된 코드는 별도의 함수로 분리한다. 주석이 없는 코드가 제일 좋은 코드임을 명심하자. [주석 없이 이해될 수 있는 코드가 좋다는 말이지, 그냥 주석을 없애라는 게 아님] 클래스와 함수에 너무 많은 기능을 주면 안 된다. 많은 기능이 묶여있다면, 기능 별로 함수, 혹은 클래스를 분리하자. 함수의 인자는 4개를 넘으면 안 된다. 복잡한 로직은 캡슐화(별도의 함수로 분리)하고 직관적인 이름을 부여하자. .py 파일 하나에 두 개 이상의 클래스를 정의하지 말자." /><link rel="canonical" href="https://parkhanyoung.github.io//posts/elegant_test/" /><meta property="og:url" content="https://parkhanyoung.github.io//posts/elegant_test/" /><meta property="og:site_name" content="박한영의 개발 블로그" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-15T01:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="PyCon - Clean Code, Test, and Refactoring" /><meta name="twitter:site" content="@no_twitter" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"headline":"PyCon - Clean Code, Test, and Refactoring","dateModified":"2021-12-22T00:47:22+09:00","datePublished":"2021-12-15T01:00:00+09:00","description":"클린코드, 테스트와 리팩토링 사전 개념 코드 악취(code smell): 코드를 읽는 이를 배려하지 않은 코드에서 나타나는 잠재적 문제들을 일컫는 말이다. 보이스카우트 규칙: 언제나 처음 왔을 때보다 깨끗하게 해놓고 캠프장을 떠날 것. 협업을 한다면 처음 받은 코드보다는 더 깨끗한 코드로 만들어야 한다. 클린 코드 핵심 가이드 가드클러즈(Guard Clause): 올바르지 않은 value를 체크하여 오류를 반환하는 구문을 위쪽에 배치한다. 이 방법을 통해 인덴트를 줄일 수 있다. NoneObject 활용: 객체가 없을 경우 None이 아닌 NoneObject를 반환하도록 하여 해당 객체가 존재하는지 여부를 따로 파악할 필요가 없도록 한다. [ex. 조건에 맞는 user가 없을 경우, user 객체와 같은 인터페이스를 갖는 user NoneObject를 반환함으로써, 별도로 user의 존재 여부를 파악하는 로직을 쓰지 않아도 되게끔 한다.] ‘not’ syntax sugar 이용 *syntax sugar를 사용하지 않고, 표준 문법을 사용하는 것을 syntax salt라고 한다. 클린 코드에서는 syntax sugar를 사용할 것을 권장한다. NoneObject 활용2: 유효성 오류가 발생하는 경우, 즉시 예외를 throw하기보다는 NoneObject를 반환함으로써, 검사를 마지막에 한 번만 진행할 수 있도록 한다. 삼항 연산자 이용 if else 키워드 사용 시 짧은 조건은 삼항 연산자를 사용한다. 단순한 형태의 if, switch문은 Dict Accessing 형식으로 바꿔준다. 작명 방법: 함수 이름은 snake_case로 지정하고, 행동을 이름의 가장 앞에 명명한다. 명사보다는 동사로써 명확하게 명시해주는 것이 좋다. 주석보단 클린 코드: 주석이 필요할 정도로 복잡한 로직은 별도의 함수로 분리하여, 함수명을 주석 대신 사용한다. 함수를 분리하는 것은 코드의 양을 줄여주고 가독성을 줄여줄 뿐만 아니라, 때로는 다른 클린 코드 패턴을 추가적으로 적용할 수 있게 해준다. 그 밖의 규칙 3줄 이상의 라인이 중복된 코드는 별도의 함수로 분리한다. 주석이 없는 코드가 제일 좋은 코드임을 명심하자. [주석 없이 이해될 수 있는 코드가 좋다는 말이지, 그냥 주석을 없애라는 게 아님] 클래스와 함수에 너무 많은 기능을 주면 안 된다. 많은 기능이 묶여있다면, 기능 별로 함수, 혹은 클래스를 분리하자. 함수의 인자는 4개를 넘으면 안 된다. 복잡한 로직은 캡슐화(별도의 함수로 분리)하고 직관적인 이름을 부여하자. .py 파일 하나에 두 개 이상의 클래스를 정의하지 말자.","url":"https://parkhanyoung.github.io//posts/elegant_test/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://parkhanyoung.github.io//posts/elegant_test/"},"@context":"https://schema.org"}</script><title>PyCon - Clean Code, Test, and Refactoring | 박한영의 개발 블로그</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="박한영의 개발 블로그"><meta name="application-name" content="박한영의 개발 블로그"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/img/github_profile.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">박한영의 개발 블로그</a></div><div class="site-subtitle font-italic">열심히도 중요하지만 꾸준히가 더 중요하다. 멀리 볼 줄 아는 사람이 되자.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/Parkhanyoung" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/no_twitter" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['phanyoung','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>PyCon - Clean Code, Test, and Refactoring</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>PyCon - Clean Code, Test, and Refactoring</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/Parkhanyoung">HanyoungPark</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2021-12-15 01:00:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Wed, Dec 15, 2021, 1:00 AM +0900" >Dec 15</em> </span> <span> Updated <em class="timeago" date="2021-12-22 00:47:22 +0900 " data-toggle="tooltip" data-placement="bottom" title="Wed, Dec 22, 2021, 12:47 AM +0900" >Dec 22</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2391 words"> <em>13 min</em> read</span></div></div></div><div class="post-content"><h1 id="클린코드-테스트와-리팩토링">클린코드, 테스트와 리팩토링</h1><p><strong>사전 개념</strong></p><ul><li><strong>코드 악취(code smell):</strong> 코드를 읽는 이를 배려하지 않은 코드에서 나타나는 잠재적 문제들을 일컫는 말이다.<li><strong>보이스카우트 규칙:</strong> 언제나 처음 왔을 때보다 깨끗하게 해놓고 캠프장을 떠날 것. 협업을 한다면 처음 받은 코드보다는 더 깨끗한 코드로 만들어야 한다.</ul><h3 id="클린-코드-핵심-가이드">클린 코드 핵심 가이드</h3><ol><li><strong>가드클러즈(Guard Clause):</strong> 올바르지 않은 value를 체크하여 오류를 반환하는 구문을 위쪽에 배치한다. 이 방법을 통해 인덴트를 줄일 수 있다. <br /> <img data-proofer-ignore data-src="/assets/img/post-img/guardclause.png" alt="guardclause" /><li><strong>NoneObject 활용:</strong> 객체가 없을 경우 None이 아닌 NoneObject를 반환하도록 하여 해당 객체가 존재하는지 여부를 따로 파악할 필요가 없도록 한다. [ex. 조건에 맞는 user가 없을 경우, user 객체와 같은 인터페이스를 갖는 user NoneObject를 반환함으로써, 별도로 user의 존재 여부를 파악하는 로직을 쓰지 않아도 되게끔 한다.] <br /> <img data-proofer-ignore data-src="/assets/img/post-img/clean_code2.png" alt="2" /><li><strong>‘not’ syntax sugar 이용</strong> <br /> *syntax sugar를 사용하지 않고, 표준 문법을 사용하는 것을 syntax salt라고 한다. 클린 코드에서는 syntax sugar를 사용할 것을 권장한다. <br /> <img data-proofer-ignore data-src="/assets/img/post-img/clean_code3.png" alt="3" /><li><strong>NoneObject 활용2:</strong> 유효성 오류가 발생하는 경우, 즉시 예외를 throw하기보다는 NoneObject를 반환함으로써, 검사를 마지막에 한 번만 진행할 수 있도록 한다. <br /> <img data-proofer-ignore data-src="/assets/img/post-img/clean_code4.png" alt="4" /><li><strong>삼항 연산자 이용</strong> if else 키워드 사용 시 짧은 조건은 삼항 연산자를 사용한다. <br /> <img data-proofer-ignore data-src="/assets/img/post-img/clean_code5.png" alt="5" /><li>단순한 형태의 if, switch문은 Dict Accessing 형식으로 바꿔준다. <br /> <img data-proofer-ignore data-src="/assets/img/post-img/clean_code6.png" alt="6" /><li><strong>작명 방법:</strong> 함수 이름은 snake_case로 지정하고, 행동을 이름의 가장 앞에 명명한다. 명사보다는 동사로써 명확하게 명시해주는 것이 좋다. <br /> <img data-proofer-ignore data-src="/assets/img/post-img/clean_code7.png" alt="7" /><li><strong>주석보단 클린 코드:</strong> 주석이 필요할 정도로 복잡한 로직은 별도의 함수로 분리하여, 함수명을 주석 대신 사용한다. 함수를 분리하는 것은 코드의 양을 줄여주고 가독성을 줄여줄 뿐만 아니라, 때로는 다른 클린 코드 패턴을 추가적으로 적용할 수 있게 해준다. <br /> <img data-proofer-ignore data-src="/assets/img/post-img/clean_code8.png" alt="8" /></ol><p><strong>그 밖의 규칙</strong></p><ul><li>3줄 이상의 라인이 중복된 코드는 별도의 함수로 분리한다.<li>주석이 없는 코드가 제일 좋은 코드임을 명심하자. [주석 없이 이해될 수 있는 코드가 좋다는 말이지, 그냥 주석을 없애라는 게 아님]<li>클래스와 함수에 너무 많은 기능을 주면 안 된다. 많은 기능이 묶여있다면, 기능 별로 함수, 혹은 클래스를 분리하자.<li>함수의 인자는 4개를 넘으면 안 된다.<li>복잡한 로직은 캡슐화(별도의 함수로 분리)하고 직관적인 이름을 부여하자.<li>.py 파일 하나에 두 개 이상의 클래스를 정의하지 말자.</ul><h3 id="테스트와-리팩토링">테스트와 리팩토링</h3><p><strong>테스트 코드가 없다면?</strong> <br /> 실제 환경에서 동작하는 코드는 생각보다 복잡하다. <br /> 그 복잡한 코드는 내부적으로 서로 연결되어 영향을 주고 받는다. <br /> 코드의 작은 부분을 수정하더라도, 코드 전체에 큰 영향을 주게 된다. <br /> 그렇다고 작은 수정을 할 때마다 일일이 모든 함수를 테스트를 할 수는 없다. <br /> 또한 특정 조건 하에서만 발생하는 버그는 감지하기가 매우 어렵다. <br /> 그렇기 때문에 개발자는 코드 수정, 혹은 기능 추가에 두려움을 가지게 된다.</p><p><strong>테스트 종류</strong></p><ul><li><strong>Unit Test(단위 테스트):</strong> 함수, 메소드의 최소 단위와 각 비즈니스 코드를 체크하는 테스트이다. 파이썬에서는 unittest 모듈을 이용할 수 있다.<li><strong>Integration Test(통합 테스트):</strong> 여러 함수, 메소드가 모인 코드의 집합을 전체적으로 체크하는 테스트이다. 실제 사용자 기능 위주의 테스트이다.<li><strong>End-To-End Test(E2E 테스트):</strong> 사용자 관점에서 UI 상에서 실제로 테스트해보는 형식의 테스트이다. 사용자의 소프트, 하드웨어 환경까지 고려하기에 가장 복잡하다. E2E 테스트까지는 하지 않는 경우도 많음.</ul><p><strong>테스트 방식</strong></p><ol><li><strong>White Box Test:</strong> 코드의 내부를 들여다보고 코드를 테스트한다. 보다 세부적인 테스트가 가능하다.<li><strong>Black Box Test:</strong> 코드의 내부를 모르는 상태에서 입력 및 출력 값으로 코드를 테스트한다.</ol><p><img data-proofer-ignore data-src="/assets/img/post-img/clean_code9.png" alt="user_service" /> *user_service.py는 내부 로직을 알고 진행하는 테스트이므로, White Box Test이고, 각각의 API 테스트는 기대값 충족 여부만을 체크하므로 Black Box Test이다. 이처럼 White Box와 Black Box는 서로 배타적인 관계가 아니며 하나의 테스트 내에서 혼용될 수 있다. <br /> *Test3은 각각의 API Test(Unit Test)를 엮어 테스트를 진행하였으므로 Integration Test에 속한다.</p><p><strong>올바른 테스트 디자인</strong> <br /> <img data-proofer-ignore data-src="/assets/img/post-img/clean_code10.png" alt="testcode_refactor" /> 테스트 코드는 가장 작은 함수 단위에서부터 통합 단위로 올라가는 Bottom up 방식으로 작업한다. <br /> 세부적인 함수에 대한 테스트를 작성하고, 그 테스트들을 엮어 통합 테스트를 진행하는 형태이다. <br /> 리팩토링은 가장 큰 통합 단위에서 함수 단위로 내려가는 Top-Down 방식으로 작업한다. <br /> 리팩토링은 side effect를 발생시키므로, 가장 큰 단위에서부터 세부적인 함수로 내려가는 형태가 바람직하다.</p><p>순수함수가 테스트 작성에 사용하기 적절하다. <br /> <strong>순수함수:</strong> 함수에 제공된 입력 값에 의해 출력 값이 결정되는 함수이다(하나의 입력 값에 대한 출력 값은 하나뿐이며 외부의 요소에 의해 달라지지 않는다.). 입력 값 외에 상태나 환경에 출력 값이 영향받지 않는다. 순수 함수의 이러한 특징을 참조 투명성(Referential Transparency, RT)라고 한다.</p><p>*때로는 외부 서버로부터 값을 받아와 테스트를 진행하는 등 불가피하게 비순수함수가 되는 경우가 있다(ex. request 모듈로 외부로부터 정보를 받아오는 경우). 그런 경우에는 가변적인 외부 값을 mocking하여 테스트를 진행한다(의존성 주입). <br /> *테스트 함수의 이름은 ‘test_‘로 시작하는 것이 컨벤션이다.</p><h3 id="tddtest-driven-development">TDD(Test Driven Development)</h3><p>테스트 코드를 먼저 작성한 후, 그 테스트 코드를 통과할 수 있는 코드를 작성한다. 그 후 코드의 동작은 차이가 없도록 기능을 유지하면서 코드를 최적화한다. 이 과정에서 테스트 코드에 모두 통과한다는 사실도 유지해야 한다.</p><p>*TDD(테스트 주도 개발)는 특정 프레임워크나 도구가 아닌 하나의 개발 방법론을 일컫는 말이다.</p><p><strong>TDD의 필요성</strong></p><ol><li>코드 유지보수에 효과적이다. 기존의 코드를 수정하거나 기능을 추가할 때, 자신이 작성한 코드로 인해 다른 부분에 영향이 가지 않았음을 테스트 코드의 피드백을 통해 명확히 알 수 있다.<li>작성하는 코드에 대한 이해도가 높아지며 깔끔한 코드를 작성하게 된다. 테스트 코드에 맞는 코드를 작성하기 위해서는 깔끔하고 명확한 코드를 작성할 수밖에 없다.<li>테스트 코드를 통해 개발자의 의도가 드러나므로, 그 자체로 설명 문서가 된다. 순서대로 이어지는 테스트 코드를 보면 코드 의도를 파악하기가 쉬워진다.<li>개발자가 직접 코드를 검증하는 과정을 축소할 수 있다.</ol><p>*TDD는 코드 생산성 자체를 높여주는 도구가 아니다. 개발 스펙이 자주 변경되거나 개발 속도가 중요한 개발 환경에는 적합하지 않으며, TravisCI, Jenkins 등을 통한 CI 환경이 구성되어 있어야 비로소 TDD의 장점을 극대화할 수 있다.[다른 자료들을 보니 TDD가 수정 사항에 대한 명확한 피드백을 주므로 불확실성이 높은 작업에 오히려 도움이 된다는 의견도 있다.]</p><hr /><p><strong>공부 자료</strong> <br /> [pyCon 한성민]우아하게 준비하는 테스트와 리팩토링: https://www.youtube.com/watch?v=S5SY2pkmOy0 [TwentyFiveSeven Velog]TDD를 적용해보자 1편: https://velog.io/@xortm854/TDD%EB%A5%BC-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-1%ED%8E%B8TDD%EB%9E%80Test-Driven-Development <br /> [yohanpro blog]테스트 주도 개발 방법론(TDD)과 필요성: https://yohanpro.com/posts/programming/tdd</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/better-code/'>Better Code</a>, <a href='/categories/python/'>Python</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/clean-code/" class="post-tag no-text-decoration" >clean code</a> <a href="/tags/test/" class="post-tag no-text-decoration" >test</a> <a href="/tags/tdd/" class="post-tag no-text-decoration" >TDD</a> <a href="/tags/refactoring/" class="post-tag no-text-decoration" >refactoring</a> <a href="/tags/python/" class="post-tag no-text-decoration" >python</a> <a href="/tags/pycon/" class="post-tag no-text-decoration" >pycon</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=PyCon - Clean Code, Test, and Refactoring - 박한영의 개발 블로그&url=https://parkhanyoung.github.io//posts/elegant_test/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=PyCon - Clean Code, Test, and Refactoring - 박한영의 개발 블로그&u=https://parkhanyoung.github.io//posts/elegant_test/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=PyCon - Clean Code, Test, and Refactoring - 박한영의 개발 블로그&url=https://parkhanyoung.github.io//posts/elegant_test/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h4>Recent Update</h4><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/JS%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B0/">common js 순환참조</a><li><a href="/posts/%ED%9A%8C%EA%B3%A02021/">2021년을 돌아보며</a><li><a href="/posts/useMemo/">useMemo, useCallback, useRef</a><li><a href="/posts/ReactLifecycle/">React Lifecycle</a><li><a href="/posts/CDM,CWUvsuseEffect/">componentDidMount, componentWillUnmount !== useEffect</a></ul></div><div id="access-tags"><h4 class="text-muted">Trending Tags</h4><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tool/">tool</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/container/">container</a> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/front-end/">front-end</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/pycon/">pycon</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/web/">web</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h4 class="pl-3 pt-2 mb-2">Contents</h4><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Pythonic/"><div class="card-body"> <em class="timeago small" date="2021-12-18 01:00:00 +0900" >Dec 18</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>PyCon - Pythonic code가 과연 효율적일까?</h3><div class="text-muted small"><p> Pythonic Code가 효율적일까? python의 철학 요약: 간단한 게 복잡한 것보다 낫다. 가장 아름다운 하나의 답이 존재한다. Pythonic? Pythonic은 말 그대로 파이썬답다는 뜻이다. 그리고 파이썬답다는 것은 파이썬의 기능들을 잘 이용하여 간결하고 가독성이 좋다는 것이다. 보통 파이썬 커뮤니티의 사람들이 쓰는 패턴을 Python...</p></div></div></a></div><div class="card"> <a href="/posts/Sequential_Data_Structure/"><div class="card-body"> <em class="timeago small" date="2021-12-11 01:00:00 +0900" >Dec 11</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Sequential Data Structure</h3><div class="text-muted small"><p> Sequential Data Structure(순차적 자료구조) List &amp; Array 배열과 리스트는 가장 기본적인 순차적(sequential) 자료구조이다. 파이썬에서는 배열이 아닌 리스트를 이용한다. 리스트와 배열의 차이 파이썬 리스트에는 정수 객체의 메모리 주소가 담긴다. 그에 비해 c언어 배열은 메모리에 정수(4byt...</p></div></div></a></div><div class="card"> <a href="/posts/Stack/"><div class="card-body"> <em class="timeago small" date="2021-12-12 01:00:00 +0900" >Dec 12</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Stack</h3><div class="text-muted small"><p> Stack Stack Methods 삽입: push [python에서의 append] 삭제: pop 조회: top 길이: len *python에서 pop은 pop이지만 push는 append인 이유는 push라는 용어가 정립되기 이전에 python이 만들어져 append라는 메소드가 이미 있었기 때문이다. 귀도 반 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Stack/" class="btn btn-outline-primary" prompt="Older"><p>Stack</p></a> <a href="/posts/DjangoVSFlask/" class="btn btn-outline-primary" prompt="Newer"><p>PyCon - Django vs Flask</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://parkhanyoung.github.io//posts/elegant_test/'; this.page.identifier = '/posts/elegant_test/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://Hanyoung.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/Parkhanyoung">HanyoungPark</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><h4 class="text-muted">Trending Tags</h4><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tool/">tool</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/container/">container</a> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/front-end/">front-end</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/pycon/">pycon</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/web/">web</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
